(this.webpackJsonpspeechstate=this.webpackJsonpspeechstate||[]).push([[0],{170:function(t,e,n){},218:function(t,e){},357:function(t,e){},360:function(t,e){},364:function(t,e){},365:function(t,e){},366:function(t,e){},367:function(t,e){},368:function(t,e){},456:function(t,e,n){"use strict";n.r(e);var r=n(166),o=n(51),a=(n(170),n(14),n(159)),c=n(25),i=n(94),u=n(3),s=n(459),d=n(460);function p(t){return Object(u.q)((function(e){return{type:"SPEAK",value:t}}))}var m={"Lecture.":{title:"Dialogue systems lecture"},"Lunch.":{title:"Lunch at the canteen"},"Socks.":{title:"Let's check who has mismatched socks"},"Food.":{title:"We need to find out who's been stealing from the fridge"},"Brainstorming.":{title:"Brainstorming ideas"},"Bookclub.":{title:"Discussing the latest book for our club."},"Movie.":{title:"Movie night."},Monday:{day:"Monday"},"Tuesday.":{day:"Tuesday"},"Wednesday.":{day:"Wednesday"},"Thursday.":{day:"Thursday"},Friday:{day:"Friday"},"Tomorrow.":{day:"tomorrow"},"Next week.":{day:"next week"},"At 9":{time:"09:00"},"At 10":{time:"10:00"},"At 11":{time:"11:00"},"At 12":{time:"12:00"},"At 1":{time:"13:00"},"At 2":{time:"14:00"},"At 3":{time:"15:00"},"At 4":{time:"16:00"},"At 5":{time:"17:00"},"At 6":{time:"18:00"},"At 7":{time:"19:00"},"At 8":{time:"20:00"}},l={"No.":{negation:"No."},"Yes.":{affirmation:"Yes."},"Of course.":{affirmation:"Yes."},"No way.":{negation:"No."},"Sure.":{affirmation:"Yes."},"Help.":{help:"Help"}},f={"I want to create a meeting.":{meeting:"Yes"},"Create a meeting.":{meeting:"Yes"},Meeting:{meeting:"Yes"},"I want to search for someone.":{person:"Yes"},"Search for someone.":{person:"Yes"},"Search.":{person:"Yes"}},E={initial:"idle",states:{idle:{on:{CLICK:"init"}},init:{on:{TTS_READY:"appointment",CLICK:"appointment"}},help:{initial:"clarification",states:{clarification:{entry:p("Listen carefully to the instructions you are presented with."),on:{ENDSPEECH:"#root.dm.appointment.hist"}}}},appointment:{initial:"username",entry:Object(u.b)({counter:function(t){return 0}}),states:{hist:{type:"history"},username:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"hello",cond:function(t){return t.recResult[0].confidence>.5},actions:Object(u.b)({username:function(t){return t.recResult[0].utterance}})},{target:"userconfirm",cond:function(t){return t.recResult[0].confidence<.5},actions:Object(u.b)({username:function(t){return t.recResult[0].utterance}})}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("What is your name?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Please tell me your name."),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("I didn't hear your name."),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Can you please repeat your name?"),on:{ENDSPEECH:"ask"}}}},userconfirm:{initial:"prompt",on:{RECOGNISED:[{target:"hello",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say ".concat(t.username,"? ")}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},hello:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Hi, ".concat(t.username,".")}})),on:{ENDSPEECH:"menu"}},menu:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"meeting",cond:function(t){return"meeting"in(f[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"searchPerson",cond:function(t){return"person"in(f[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"confirmmenu",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("Do you want to search for someone on the internet or create a meeting?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Please tell me what you would like to do."),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("Would you rather set a meeting or search for someone?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Can you please repeat?"),on:{ENDSPEECH:"ask"}}}},confirmmenu:{initial:"prompt",on:{RECOGNISED:[{target:"searchPerson",cond:function(t){return"person"in(f[t.recResult[0].utterance]||{})&&"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"setMeeting",cond:function(t){return"meeting"in(f[t.recResult[0].utterance]||{})&&"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.menu",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Was that what you meant to say?"}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},searchPerson:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"searching",actions:Object(u.b)({person:function(t){return t.recResult[0].utterance}}),cond:function(t){return t.recResult[0].confidence>.5}},{target:"confirmsearching",cond:function(t){return t.recResult[0].confidence<.5}}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("Who are you searching for?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Who are you curious about?"),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("Let's decide who to search for"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Can you please repeat?"),on:{ENDSPEECH:"ask"}}}},confirmsearching:{initial:"prompt",on:{RECOGNISED:[{target:"searching",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.searchPerson",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say ".concat(t.person,"? ")}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},searching:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK, searching the internet for ".concat(t.person)}})),on:{ENDSPEECH:"duckgo"}},duckgo:{invoke:{id:"duckduckgo",src:function(t,e){return n=t.person,fetch(new Request("https://cors.eu.org/https://api.duckduckgo.com/?q=".concat(n,"&format=json&skip_disambig=1"))).then((function(t){return t.json()}));var n},onDone:{target:"infoperson",actions:Object(u.b)({snippet:function(t,e){return e.data.AbstractText}})},onError:{target:"searchPerson"}}},infoperson:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"".concat(t.snippet)}})),on:{ENDSPEECH:"setMeeting"}},setMeeting:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"askday",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5},actions:Object(u.b)({title:function(t){return"meeting with ".concat(t.person)}})},{target:"confirmsetupmeetingwithperson",cond:function(t){return t.recResult[0].confidence<.5},actions:Object(u.b)({title:function(t){return"meeting with ".concat(t.person)}})},{target:"menu",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("Do you want to meet them?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Would you like me to set up a meeting with them?"),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("Let's set up a meeting with them."),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Can you please repeat?"),on:{ENDSPEECH:"ask"}}}},confirmsetupmeetingwithperson:{initial:"prompt",on:{RECOGNISED:[{target:"askday",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.setMeeting",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},meeting:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"info",cond:function(t){return"title"in(m[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5},actions:Object(u.b)({title:function(t){return m[t.recResult[0].utterance].title}})},{target:"confirmmeeting",cond:function(t){return t.recResult[0].confidence<.5},actions:Object(u.b)({title:function(t){return m[t.recResult[0].utterance].title}})},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("Let's create a meeting. What is it about?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Shall we create a meeting? Tell me the occasion."),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("What would you like you meeting to be about?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},confirmmeeting:{initial:"prompt",on:{RECOGNISED:[{target:"info",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.meeting",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},info:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK, ".concat(t.title)}})),on:{ENDSPEECH:"askday"}},askday:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"infoday",cond:function(t){return"day"in(m[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5},actions:Object(u.b)({day:function(t){return m[t.recResult[0].utterance].day}})},{target:"confirmaskday",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("On which day is it?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("On which day is your meeting?"),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("When should the meeting be?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, can you please repeat?"),on:{ENDSPEECH:"ask"}}}},confirmaskday:{initial:"prompt",on:{RECOGNISED:[{target:"infoday",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.askday",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},infoday:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK, ".concat(t.day)}})),on:{ENDSPEECH:"wholeday"}},wholeday:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"infowholeday",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"asktime",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"confirmwholeday",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("Will it take the whole day?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("Is your meeting for the whole day?"),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("Would you like your meeting to be for the whole day?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Could you please repeat?"),on:{ENDSPEECH:"ask"}}}},confirmwholeday:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.appointment.wholeday",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.wholeday",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},infowholeday:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"{'Ok, Let's set a meeting for the day.'}"}})),on:{ENDSPEECH:"meetingwholeday"}},meetingwholeday:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"meetingcreated",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"meeting",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"meetingwholedayconfirm",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Do you want me to create a meeting titled ".concat(t.title," on ").concat(t.day," for the whole day? ")}})),on:{ENDSPEECH:"ask"}},prompt2:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Would you like your meeting ".concat(t.title," to be on ").concat(t.day," for the whole day? ")}})),on:{ENDSPEECH:"ask"}},prompt3:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Should I set up a meeting named ".concat(t.title," on ").concat(t.day," for the whole day? ")}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},meetingwholedayconfirm:{initial:"prompt",on:{RECOGNISED:[{target:"infomeeting",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.meetingwholeday",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},infomeeting:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK"}})),on:{ENDSPEECH:"meetingcreated"}},asktime:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"infoasktime",cond:function(t){return"time"in(m[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5},actions:Object(u.b)({time:function(t){return m[t.recResult[0].utterance].time}})},{target:"confirmasktime",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:p("What time is your meeting going to be?"),on:{ENDSPEECH:"ask"}},prompt2:{entry:p("What time should I set the meeting for?"),on:{ENDSPEECH:"ask"}},prompt3:{entry:p("Tell me the time for your meeting."),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Could you please repeat that?"),on:{ENDSPEECH:"ask"}}}},confirmasktime:{initial:"prompt",on:{RECOGNISED:[{target:"infoasktime",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.asktime",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say ".concat(t.time,"? ")}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},infoasktime:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK, ".concat(t.time)}})),on:{ENDSPEECH:"askmeeting2"}},askmeeting2:{initial:"prompt",entry:Object(u.b)({counter:function(t){return 0}}),on:{RECOGNISED:[{target:"#root.dm.help",cond:function(t){return"help"in(l[t.recResult[0].utterance]||{})}},{target:"meetingcreated",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"meeting",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})&&t.recResult[0].confidence>.5}},{target:"confirmmeetingcreated",cond:function(t){return t.recResult[0].confidence<.5}},{target:".nomatch"}],TIMEOUT:{actions:Object(u.b)({counter:function(t){return t.counter+1}}),target:".counts"}},states:{counts:{always:[{target:"prompt",cond:function(t){return 0===t.counter}},{target:"prompt2",cond:function(t){return 1===t.counter}},{target:"prompt3",cond:function(t){return 2===t.counter}},{target:"#root.dm.init",cond:function(t){return 3===t.counter}}]},prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Do you want me to create a meeting titled ".concat(t.title," on ").concat(t.day," at ").concat(t.time,"? ")}})),on:{ENDSPEECH:"ask"}},prompt2:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Would you like your meeting ".concat(t.title," to be on ").concat(t.day," at ").concat(t.time,"? ")}})),on:{ENDSPEECH:"ask"}},prompt3:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Should I set up a meeting named ".concat(t.title," on ").concat(t.day," at ").concat(t.time,"? ")}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},confirmmeetingcreated:{initial:"prompt",on:{RECOGNISED:[{target:"meetingcreated",cond:function(t){return"affirmation"in(l[t.recResult[0].utterance]||{})}},{target:"#root.dm.appointment.askmeeting2",cond:function(t){return"negation"in(l[t.recResult[0].utterance]||{})}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"did you mean to say that? "}})),on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},nomatch:{entry:p("Sorry, I didn't understand. Can you please repeat that?"),on:{ENDSPEECH:"ask"}}}},meetingcreated:{initial:"prompt",states:{prompt:{entry:p("Your meeting has been created!")}}}}}}},y=n(160),g=n.n(y),h=n(163),S=n.n(h),b=n(12),O=c.a.send,k=c.a.cancel,C="northeurope";Object(d.a)({url:"https://statecharts.io/inspect",iframe:!1});var R=Object(i.a)({id:"root",type:"parallel",states:{dm:Object(o.a)({},E),asrtts:{initial:"init",states:{init:{on:{CLICK:{target:"getToken",actions:[Object(u.b)({audioCtx:function(t){return new(window.AudioContext||window.webkitAudioContext)}}),function(t){return navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.audioCtx.createMediaStreamSource(e)}))}]}}},getToken:{invoke:{id:"getAuthorizationToken",src:function(t,e){return D()},onDone:{actions:[Object(u.b)((function(t,e){return{azureAuthorizationToken:e.data}})),"ponyfillASR"],target:"ponyfillTTS"},onError:{target:"fail"}}},ponyfillTTS:{invoke:{id:"ponyTTS",src:function(t,e){return function(e,n){var r=S()({audioContext:t.audioCtx,credentials:{region:C,authorizationToken:t.azureAuthorizationToken}}),o=r.speechSynthesis,a=r.SpeechSynthesisUtterance;t.tts=o,t.ttsUtterance=a,t.tts.addEventListener("voiceschanged",(function(){t.tts.cancel();var n=t.tts.getVoices(),r=RegExp("en-US","u");r=RegExp("en-US","u");var o=n.find((function(t){return r.test(t.name)}));o?(t.voice=o,e("TTS_READY")):(console.error("TTS_ERROR: Could not get voice for regexp ".concat(r)),e("TTS_ERROR"))}))}}},on:{TTS_READY:"idle",TTS_ERROR:"fail"}},idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(u.b)((function(t,e){return{ttsAgenda:e.value}}))}}},recognising:{initial:"noinput",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(u.b)((function(t,e){return{recResult:e.value}}))],target:".match"},RECOGNISED:"idle",SELECT:"idle",CLICK:".pause"},states:{noinput:{entry:["recStart",O({type:"TIMEOUT"},{delay:function(t){return 1e3*(t.tdmPassivity||10)},id:"timeout"})],on:{TIMEOUT:"#root.asrtts.idle",STARTSPEECH:"inprogress"},exit:k("timeout")},inprogress:{},match:{entry:O("RECOGNISED")},pause:{entry:"recStop",on:{CLICK:"noinput"}}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle",SELECT:"idle",CLICK:{target:"idle",actions:O("ENDSPEECH")}},exit:"ttsStop"},fail:{}}}}},{actions:{recLogResult:function(t){console.log("U>",t.recResult[0].utterance,t.recResult[0].confidence)},logIntent:function(t){console.log("<< NLU intent: "+t.nluData.intent.name)}}}),N=function(t){var e=((t.state.context.tdmVisualOutputInfo||[{}]).find((function(t){return"name"===t.attribute}))||{}).value,n=((t.state.context.tdmVisualOutputInfo||[{}]).find((function(t){return"image"===t.attribute}))||{}).value,r="circle";switch(!0){case t.state.matches({asrtts:"fail"})||t.state.matches({dm:"fail"}):break;case t.state.matches({asrtts:{recognising:"pause"}}):e="Click to continue";break;case t.state.matches({asrtts:"recognising"}):r="circle-recognising",e=e||"Listening...";break;case t.state.matches({asrtts:"speaking"}):r="circle-speaking",e=e||"Speaking...";break;case t.state.matches({dm:"idle"}):case t.state.matches({dm:"init"}):e="Click to start!",r="circle-click";break;default:e=e||"\xa0"}return Object(b.jsxs)("div",{className:"control",children:[Object(b.jsx)("figure",{className:"prompt",children:n&&Object(b.jsx)("img",{src:n,alt:e})}),Object(b.jsxs)("div",{className:"status",children:[Object(b.jsx)("button",Object(o.a)({type:"button",className:r,style:{}},t)),Object(b.jsx)("div",{className:"status-text",children:e})]})]})},j=function(t){var e=t.alternative.find((function(t){return"name"===t.attribute})).value,n=(t.alternative.find((function(t){return"image"===t.attribute}))||{}).value;return Object(b.jsxs)("figure",Object(o.a)(Object(o.a)({className:"flex"},t),{},{children:[n&&Object(b.jsx)("img",{src:n,alt:e}),Object(b.jsx)("figcaption",{children:e})]}))};function P(){var t=Object(s.b)(R,{devTools:!0,actions:{changeColour:Object(s.a)((function(t){document.body.style.background=t.recResult[0].utterance})),recStart:Object(s.a)((function(t){t.asr.start()})),recStop:Object(s.a)((function(t){t.asr.abort()})),ttsStart:Object(s.a)((function(t){var e=new t.ttsUtterance(t.ttsAgenda);console.log("S>",t.ttsAgenda),e.voice=t.voice,e.onend=function(){return o("ENDSPEECH")},t.tts.speak(e)})),ttsStop:Object(s.a)((function(t){t.tts.cancel()})),ponyfillASR:Object(s.a)((function(t,e){var n=g()({audioContext:t.audioCtx,credentials:{region:C,authorizationToken:t.azureAuthorizationToken}}).SpeechRecognition;t.asr=new n,t.asr.lang="en-US",t.asr.continuous=!0,t.asr.interimResults=!0,t.asr.onresult=function(t){var e=t.results[0];e.isFinal?o({type:"ASRRESULT",value:[{utterance:e[0].transcript,confidence:e[0].confidence}]}):o({type:"STARTSPEECH"})}}))}}),e=Object(r.a)(t,2),n=e[0],o=e[1],a=(n.context.tdmExpectedAlternatives||[]).filter((function(t){return t.visual_information})).map((function(t,e){return Object(b.jsx)(j,{state:n,alternative:t.visual_information,onClick:function(){return o({type:"SELECT",value:t.semantic_expression})}},e)}));return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(N,{state:n,alternative:{},onClick:function(){return o("CLICK")}}),Object(b.jsx)("div",{className:"select-wrapper",children:Object(b.jsx)("div",{className:"select",children:a})})]})}var D=function(){return fetch(new Request("https://northeurope.api.cognitive.microsoft.com/sts/v1.0/issuetoken",{method:"POST",headers:{"Ocp-Apim-Subscription-Key":"cf50e213be6e42308020edea81469b7b"}})).then((function(t){return t.text()}))},T=document.getElementById("root");a.render(Object(b.jsx)(P,{}),T)}},[[456,1,2]]]);
//# sourceMappingURL=main.625162e0.chunk.js.map